<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="ASA_Save_Inspector.Pages.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ASA_Save_Inspector.Pages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:styling="using:ASA_Save_Inspector.Styling"
    mc:Ignorable="d"
    FontSize="16"
    x:Name="page_Settings"
    SizeChanged="page_SizeChanged">

    <Grid x:Name="gr_SettingsPage">
        <StackPanel Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
            <TextBlock Text="Settings" Style="{ThemeResource TitleLargeTextBlockStyle}" Margin="42,0,0,0" TextWrapping="WrapWholeWords"/>
            <StackPanel Orientation="Vertical" Margin="10,15,0,0">
                <TextBlock Text="Language" Style="{ThemeResource TitleTextBlockStyle}" TextWrapping="WrapWholeWords"/>
                <DropDownButton x:Name="ddb_LanguageSelect" MinWidth="250" HorizontalAlignment="Left" HorizontalContentAlignment="Left" Margin="0,5,0,0">
                    <RichTextBlock x:Name="rtb_LanguageSelect" HorizontalAlignment="Left" HorizontalTextAlignment="Left" TextWrapping="WrapWholeWords">
                        <Paragraph TextAlignment="Left" HorizontalTextAlignment="Left" LineHeight="20">
                            <InlineUIContainer>
                                <Image x:Name="i_LanguageSelect" Source="ms-appx:///Assets/FlagGBIcon96.png" Height="20" Width="20" Margin="0,0,0,-5"/>
                            </InlineUIContainer>
                            <Run x:Name="r_LanguageSelect">English</Run>
                        </Paragraph>
                    </RichTextBlock>
                    <DropDownButton.Flyout>
                        <MenuFlyout x:Name="mf_LanguageSlect" Placement="BottomEdgeAlignedLeft">
                            <MenuFlyoutItem x:Name="mfi_LanguageEnglish" Text="English" Click="mfi_LanguageEnglish_Click">
                                <MenuFlyoutItem.Icon>
                                    <ImageIcon Source="ms-appx:///Assets/FlagGBIcon96.png" Width="20" Height="20"/>
                                </MenuFlyoutItem.Icon>
                            </MenuFlyoutItem>
                            <MenuFlyoutItem x:Name="mfi_LanguageFrench" Text="FranÃ§ais" Click="mfi_LanguageFrench_Click">
                                <MenuFlyoutItem.Icon>
                                    <ImageIcon Source="ms-appx:///Assets/FlagFRIcon96.png" Width="20" Height="20"/>
                                </MenuFlyoutItem.Icon>
                            </MenuFlyoutItem>
                        </MenuFlyout>
                    </DropDownButton.Flyout>
                </DropDownButton>

                <TextBlock Text="Python Setup" Style="{ThemeResource TitleTextBlockStyle}" Margin="0,25,0,0" TextWrapping="WrapWholeWords"/>
                <TextBlock Text="ASA Save Inspector needs Python 3 in order to extract data from save files using ArkParse." Margin="0,5,0,0" TextWrapping="WrapWholeWords"/>
                <TextBlock Text="Please select Python executable from the dropdown menu below:" TextWrapping="WrapWholeWords"/>
                <DropDownButton x:Name="ddb_PythonSelect" MinWidth="250" HorizontalAlignment="Left" HorizontalContentAlignment="Left" Margin="0,5,0,0">
                    <TextBlock x:Name="tb_PythonSelect" FontSize="14" Text="Click here..." HorizontalAlignment="Left" HorizontalTextAlignment="Left" TextWrapping="WrapWholeWords"/>
                    <DropDownButton.Flyout>
                        <MenuFlyout x:Name="mf_PythonSelect" Placement="BottomEdgeAlignedLeft">
                        </MenuFlyout>
                    </DropDownButton.Flyout>
                </DropDownButton>
                <TextBlock Margin="0,5,0,0" FontStyle="Italic" TextWrapping="WrapWholeWords">If you don't have Python 3 installed, you can get it here: <Hyperlink NavigateUri="https://www.python.org/downloads/" ToolTipService.ToolTip="Download Python 3">https://www.python.org/downloads/</Hyperlink></TextBlock>

                <TextBlock Text="JSON Data" Style="{ThemeResource TitleTextBlockStyle}" Margin="0,25,0,0" TextWrapping="WrapWholeWords"/>
                <TextBlock Text="Please select the JSON Data from the dropdown menu below:" Margin="0,5,0,0" TextWrapping="WrapWholeWords"/>
                <DropDownButton x:Name="ddb_JsonDataSelect" MinWidth="250" HorizontalAlignment="Left" HorizontalContentAlignment="Left" Margin="0,5,0,0">
                    <TextBlock x:Name="tb_JsonDataSelect" FontSize="14" Text="Click here..." HorizontalAlignment="Left" HorizontalTextAlignment="Left" TextWrapping="WrapWholeWords"/>
                    <DropDownButton.Flyout>
                        <MenuFlyout x:Name="mf_JsonDataSelect" Placement="BottomEdgeAlignedLeft">
                            <MenuFlyoutItem x:Name="mfi_JsonDataArkParse" Text="Extract JSON Data" Click="mfi_JsonDataArkParse_Click">
                                <MenuFlyoutItem.Icon>
                                    <ImageIcon Source="ms-appx:///Assets/ArkParserIcon96.png" Width="20" Height="20"/>
                                </MenuFlyoutItem.Icon>
                            </MenuFlyoutItem>
                            <MenuFlyoutItem x:Name="mfi_JsonDataManual" Text="Select JSON Data folder manually" Click="mfi_JsonDataManual_Click">
                                <MenuFlyoutItem.Icon>
                                    <ImageIcon Source="ms-appx:///Assets/FolderIcon96.png" Width="20" Height="20"/>
                                </MenuFlyoutItem.Icon>
                            </MenuFlyoutItem>
                        </MenuFlyout>
                    </DropDownButton.Flyout>
                </DropDownButton>
                <TextBlock x:Name="tb_CannotExtractWithArkParse" Text="Cannot extract JSON Data. Please verify the Python Setup above." Foreground="Red" Margin="0,5,0,0" TextWrapping="WrapWholeWords" Visibility="Collapsed"/>
                <StackPanel Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Left">
                    <Button x:Name="btn_LoadJsonData" Content="Load JSON Data" Width="200" Click="btn_LoadJsonData_Click" FontSize="18" Visibility="Collapsed" Margin="0,10,0,0"/>
                    <Button x:Name="btn_RemoveJsonData" Content="Remove JSON Data" Width="200" Click="btn_RemoveJsonData_Click" FontSize="18" Visibility="Collapsed" Margin="10,10,0,0"/>
                </StackPanel>
                <TextBlock x:Name="tb_JsonDataLoaded" Text="JSON Data successfully loaded." Foreground="Green" Margin="0,5,0,0" TextWrapping="WrapWholeWords" Visibility="Collapsed"/>
            </StackPanel>
        </StackPanel>

        <Popup VerticalOffset="0" HorizontalOffset="0" x:Name="StandardPopup">
            <Border Width="{Binding ElementName=page_Settings, Path=WindowWidth, Mode=TwoWay}" Height="{Binding ElementName=page_Settings, Path=WindowHeight, Mode=TwoWay}">
                <Border BorderBrush="{StaticResource AcrylicInAppFillColorDefaultBrush}" 
                        Background="{StaticResource AcrylicBackgroundFillColorDefaultBrush}"
                        BorderThickness="2" CornerRadius="4">
                    <StackPanel Orientation="Vertical" Margin="10,5,0,0">
                        <TextBlock Text="Extract JSON Data" Style="{ThemeResource TitleLargeTextBlockStyle}" Margin="42,0,0,0" TextWrapping="WrapWholeWords"/>
                        <Button Content="Select ASA save file" Width="200" Click="SelectASASaveFileClicked" Margin="0,15,0,0" FontSize="18"/>
                        <StackPanel x:Name="sp_extractJsonPopup" Orientation="Vertical" Margin="0,5,0,0" Visibility="Collapsed">
                            <TextBlock x:Name="tb_ASASaveFilePath" Text="..." TextWrapping="WrapWholeWords" FontSize="18"/>
                            <TextBlock Text="JSON Data to extract:" TextWrapping="WrapWholeWords" FontSize="18" Margin="0,15,0,0"/>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <CheckBox x:Name="cb_extractDinos" Grid.Row="0" Grid.Column="0" IsChecked="True" FontSize="18">Dinos</CheckBox>
                                <CheckBox x:Name="cb_extractPlayerPawns" Grid.Row="0" Grid.Column="1" IsChecked="True" FontSize="18">Player pawns</CheckBox>
                                <CheckBox x:Name="cb_extractItems" Grid.Row="1" Grid.Column="0" IsChecked="True" FontSize="18">Items</CheckBox>
                                <CheckBox x:Name="cb_extractStructures" Grid.Row="1" Grid.Column="1" IsChecked="True" FontSize="18">Structures</CheckBox>
                                <CheckBox x:Name="cb_extractPlayers" Grid.Row="2" Grid.Column="0" IsChecked="True" FontSize="18">Players</CheckBox>
                                <CheckBox x:Name="cb_extractTribes" Grid.Row="2" Grid.Column="1" IsChecked="True" FontSize="18">Tribes</CheckBox>
                            </Grid>
                            <TextBlock Text="Map name:" TextWrapping="WrapWholeWords" FontSize="18" Margin="0,15,0,0"/>
                            <DropDownButton x:Name="ddb_MapName" MinWidth="250" HorizontalAlignment="Left" HorizontalContentAlignment="Left" Margin="0,5,0,0">
                                <TextBlock x:Name="tb_MapNameSelect" FontSize="14" Text="Click here..." HorizontalAlignment="Left" HorizontalTextAlignment="Left" TextWrapping="WrapWholeWords"/>
                                <DropDownButton.Flyout>
                                    <MenuFlyout x:Name="mf_MapNameSlect" Placement="BottomEdgeAlignedLeft">
                                    </MenuFlyout>
                                </DropDownButton.Flyout>
                            </DropDownButton>
                            <Button Content="Extract" Width="200" Click="ExtractASASaveFileClicked" Margin="0,15,0,0" FontSize="18"/>
                            <TextBlock x:Name="tb_ExtractJsonResult" Text="Failed to extract" TextWrapping="WrapWholeWords" Visibility="Collapsed" Margin="0,5,0,0" FontSize="18"/>
                        </StackPanel>
                        <Button Content="Cancel" Width="200" Click="CloseArkParserPopupClicked" Margin="0,55,0,0" FontSize="18"/>
                    </StackPanel>
                </Border>
            </Border>
        </Popup>

        <Popup VerticalOffset="0" HorizontalOffset="0" x:Name="JsonFolderSelectedPopup">
            <Border Width="{Binding ElementName=page_Settings, Path=WindowWidth, Mode=TwoWay}" Height="{Binding ElementName=page_Settings, Path=WindowHeight, Mode=TwoWay}">
                <Border BorderBrush="{StaticResource AcrylicInAppFillColorDefaultBrush}" 
                        Background="{StaticResource AcrylicBackgroundFillColorDefaultBrush}"
                        BorderThickness="2" CornerRadius="4">
                    <StackPanel Orientation="Vertical" Margin="10,5,0,0">
                        <TextBlock Text="JSON Data Info" Style="{ThemeResource TitleLargeTextBlockStyle}" Margin="42,0,0,0" TextWrapping="WrapWholeWords"/>
                        <TextBlock Text="Found JSON Data:" TextWrapping="WrapWholeWords" FontSize="18" Margin="0,15,0,0"/>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="180"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <CheckBox x:Name="cb_foundDinos" Grid.Row="0" Grid.Column="0" IsChecked="False" IsEnabled="False" FontSize="18">Dinos</CheckBox>
                            <CheckBox x:Name="cb_foundPlayerPawns" Grid.Row="0" Grid.Column="1" IsChecked="False" IsEnabled="False" FontSize="18">Player pawns</CheckBox>
                            <CheckBox x:Name="cb_foundItems" Grid.Row="1" Grid.Column="0" IsChecked="False" IsEnabled="False" FontSize="18">Items</CheckBox>
                            <CheckBox x:Name="cb_foundStructures" Grid.Row="1" Grid.Column="1" IsChecked="False" IsEnabled="False" FontSize="18">Structures</CheckBox>
                            <CheckBox x:Name="cb_foundPlayers" Grid.Row="2" Grid.Column="0" IsChecked="False" IsEnabled="False" FontSize="18">Players</CheckBox>
                            <CheckBox x:Name="cb_foundTribes" Grid.Row="2" Grid.Column="1" IsChecked="False" IsEnabled="False" FontSize="18">Tribes</CheckBox>
                        </Grid>
                        <TextBlock Text="Map name:" TextWrapping="WrapWholeWords" FontSize="18" Margin="0,15,0,0"/>
                        <DropDownButton x:Name="ddb_FolderMapName" MinWidth="250" HorizontalAlignment="Left" HorizontalContentAlignment="Left" Margin="0,5,0,0">
                            <TextBlock x:Name="tb_FolderMapNameSelect" FontSize="14" Text="Click here..." HorizontalAlignment="Left" HorizontalTextAlignment="Left" TextWrapping="WrapWholeWords"/>
                            <DropDownButton.Flyout>
                                <MenuFlyout x:Name="mf_FolderMapNameSlect" Placement="BottomEdgeAlignedLeft">
                                </MenuFlyout>
                            </DropDownButton.Flyout>
                        </DropDownButton>
                        <Button Content="OK" Width="200" Click="ValidateJsonFolderSelectedClicked" Margin="0,15,0,0" FontSize="18"/>
                        <Button Content="Cancel" Width="200" Click="CloseJsonFolderSelectedPopupClicked" Margin="0,55,0,0" FontSize="18"/>
                    </StackPanel>
                </Border>
            </Border>
        </Popup>

        <Popup VerticalOffset="0" HorizontalOffset="0" x:Name="ConfirmJsonExportRemovalPopup">
            <Border Width="{Binding ElementName=page_Settings, Path=WindowWidth, Mode=TwoWay}" Height="{Binding ElementName=page_Settings, Path=WindowHeight, Mode=TwoWay}">
                <Border BorderBrush="{StaticResource AcrylicInAppFillColorDefaultBrush}" 
                        Background="{StaticResource AcrylicBackgroundFillColorDefaultBrush}"
                        BorderThickness="2" CornerRadius="4">
                    <StackPanel Orientation="Vertical" Margin="10,5,0,0">
                        <TextBlock Text="Confirm Removal" Style="{ThemeResource TitleLargeTextBlockStyle}" Margin="42,0,0,0" TextWrapping="WrapWholeWords"/>
                        <TextBlock x:Name="tb_confirmJsonFolderRemoval" Text="Are you sure that you want to delete folder?" TextWrapping="WrapWholeWords" FontSize="18" Margin="0,15,0,0"/>
                        <Button Content="Remove" Width="200" Click="ValidateJsonFolderRemovalClicked" Margin="0,15,0,0" FontSize="18"/>
                        <Button Content="Cancel" Width="200" Click="CloseJsonFolderRemovalPopupClicked" Margin="0,55,0,0" FontSize="18"/>
                    </StackPanel>
                </Border>
            </Border>
        </Popup>
    </Grid>
</Page>
